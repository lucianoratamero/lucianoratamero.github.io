<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="http://lucianoratamero.github.io/img/favicon.png" />

  <meta name="msapplication-TileColor" content="#000000">
  <meta name="theme-color" content="#000000">
  <meta name="viewport" content="width=device-width">

  <link rel="stylesheet" href="/static/css/main.min.css">

  <title>a jQuery não é a vilã; você é - uma discussão sobre o uso da jQuery em grandes projetos — luciano@ratamero.com</title>
  <meta name="keywords" content="jQuery, grandes projetos, arquitetura, planejamento, frontend, javascript, frameworks, segregated dom">
  <meta name="viewport" content="width=device-width">

</head>
<body>
  <div id="loading" style="display: none;">
    <div class="section">
      <div class="spinner">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
      </div>
    </div>
  </div>
  <div id="blog" style="opacity: 0;">
    <div class="max-width-4 mx-auto">
      <div class="sm-col-12 md-col-8 px2 mx-auto">
        <div id="main-content">
          <h1 id="title" class="center mb0"><a href="/">luciano@ratamero.com</a></h1>
          <ul class="list-reset center mt0">
            <li class="inline-block">
              <a href="/about">about</a>
            </li>
            <li class="inline-block">
              <a href="/blog">blog</a>
            </li>
            <li class="inline-block">
              <a href="/social">social</a>
            </li>
            <li class="inline-block">
              <a href="/talks">talks</a>
            </li>
          </ul>
          
  
  <div class="blog-post">
    <div class="blog-post-title">
      
        <h2>a jQuery não é a vilã; você é - uma discussão sobre o uso da jQuery em grandes projetos</h2>
      
      
        <p>26/02/2016, 16h10</p>
      
    </div>
  <div class="image-wrapper">
    <img src="cover.png">
</div><p><em>publicado no <a href="https://medium.com/@lucianoratamero/a-jquery-n%C3%A3o-%C3%A9-a-vil%C3%A3-voc%C3%AA-%C3%A9-uma-discuss%C3%A3o-sobre-o-uso-da-jquery-em-grandes-projetos-75db3659b34#.mpgzha4gs">medium</a> em 13 de Dezembro de 2015</em></p>
<p>uma das coisas que mais me deixam feliz na comunidade de javascript é sua velocidade de mudança e absorção de ideias. durante meus cinco anos de desenvolvedor, vi grandes mudanças no uso e no perfil de quem usa javascript — pra melhor, <strong>muito</strong> melhor. é uma comunidade com orgulho de ser jovem, de fazer as coisas com as próprias mãos, de não ter medo de aprender com as outras linguagens e que admite as próprias falhas. no entanto, uma coisa nunca fez muito sentido pra mim: por que raios todo mundo odeia a jQuery?</p>
<hr>

<p>tenho alguns pensamentos sobre o assunto, pensamentos mamílicos, e finalmente saí da inércia de escrever sobre isso. bem, antes de tudo, aqueles disclaimers: essa é a minha opinião, somente minha, e você tem todo o direito de concordar ou discordar, completamente ou em partes. minha intenção é exatamente essa, de gerar material para gerar discussão. :)</p>
<p>vou dividir meus pensamentos em quatro partes:</p>
<ol>
<li>jQuery como porta de entrada ao mundo do front end;</li>
<li>jQuery e seu papel em grandes projetos;</li>
<li>jQuery, suas características e seu ecossistema;</li>
<li>os problemas da jQuery e como solucioná-los.</li>
</ol>
<p>então sentem-se em um lugar confortável, peguem café e aguinha e tentem me acompanhar nesse post que promete ser bem grande. e lá vamos nós!</p>
<hr>

<h3>jQuery como porta de entrada ao mundo do front end</h3>
<p>bem, aqui vou chover um pouco no molhado, mas é necessário dizer: aprender javascript de front end é difícil. tão difícil como aprender outras linguagens de alto nível; talvez um pouco mais, por seus tipos dinâmicos e mensagens de erro não muito intuitivas (nunca vou me esquecer do meu primeiro NaN, e acho que vocês também não se esqueceram dos seus).
mas isso não é tanto problema, já que no front a gente não precisa de uma programação muito pesada, e grande parte dela envolve lidar com o DOM. mas o DOM… o DOM… ele é um menino volúvel. um menino verboso. um menino que consegue ser menos intuitivo do que as mensagens de erros do javascript.</p>
<p>a verdade é que poucos de nós paramos pra realmente entender como o DOM funciona, exatamente porque não precisamos disso para a maioria das tarefas diárias. temos bibliotecas e frameworks que lidam com ele por nós — e isso é bom.</p>
<p>por isso eu digo: agradeço imensamente por ter começado a aprender javascript com front end, principalmente por ter aprendido com a jQuery. ela esconde o suficiente, te ensinando o necessário para suas tarefas diárias. a jQuery é tão boa, mas tão boa, que muitos nem aprendem javascript; ficam na jQuery mesmo.</p>
<p>a jQuery é boa pros iniciantes por ser uma camada fina, mas consistente, por cima do DOM.</p>
<p>“mas Luciano, eu não sou iniciante, eu sei javascript! se eu sei fazer o que a jQuery faz, pra que que eu preciso usar?”, você está pensando. calma, calma, vamos lá.</p>
<h3>jQuery e seu papel em grandes projetos</h3>
<p>quem aqui já teve que manter um projeto por mais de três anos, por favor, levante a mão. o/ manter um projeto de longa data não é fácil, e isso se dá por vários motivos: a rotatividade de pessoas tende a ser alta; as convenções de padrões de desenvolvimento se perdem; as dependências tecnológicas do projeto mudam.</p>
<p>em um projeto de longa data, o código que antes era bom e resolvia um problema agora é ruim, obsoleto, difícil de manter; e isso é natural.</p>
<p>é natural porque as pessoas aprendem. porque elas evoluem, assim como a tecnologia. porque elas entram e saem do projeto, trazendo e levando a bagagem de cada um.</p>
<p>nessa hora, ter uma API consistente, única e bem documentada é essencial. uma API consistente permite que pessoas entrem e saiam do projeto sem ter medo de deixar um código ininteligível pra trás — a não ser que queiram.</p>
<p>se a API for simples, fácil de usar e bem documentada, ela permite que desenvolvedores que mal conhecem do projeto possam cair dentro e desenvolverem o que precisam, sem muito medo de fazer besteira. e a jQuery é perfeita pra esse papel.</p>
<p>perdi a conta das vezes que vi desenvolvedores de back end ou de outros projetos mandando ver em correção de bug dos meus projetos, e isso só se tornou possível porque desenvolver front se tornou fácil.</p>
<p>“mas Luciano, a jQuery é muito pesada, quero que meu site mobile seja leve”, você diz. calma, calma, vamos lá.</p>
<h3>jQuery, suas características e seu ecossistema</h3>
<p>digamos que você tá fazendo seu projetinho, e ele é só seu, e você é bom em javascript, e você acha que a jQuery é pesada demais pro que você quer fazer. é uma preocupação válida essa, a de fazer seu usuário baixar o mínimo de script possível. só te digo uma coisa: falar que a jQuery é pesada é coisa do passado. a moda agora é, é gzipar pesado.</p>
<p>piada bosta à parte, tô falando sério. a jQuery mais nova, minificada e gzipada, pesa 29kbs. <a href="https://mathiasbynens.be/demo/jquery-size">sério. mesmo.</a> 29kbs não é nada hoje em dia. <a href="https://en.wikipedia.org/wiki/Nintendo_Entertainment_System_technical_specifications#Memory">cabe até num cartucho de NES.</a></p>
<p>outra coisa: ela aumentou de tamanho ao longo dos anos, sim, mas diminuiu de tamanho em relação a alguns anos atrás. isso, aliado à evolução da velocidade de tráfego de dados, faz com que o argumento que jQuery é pesada seja, no mínimo, desinformado.</p>
<p>claro, claro, conseguimos fazer coisas mais leves, usando outros frameworks (como o <a href="http://riotjs.com/">riot</a>) ou outras bibliotecas similares (como o <a href="http://zeptojs.com/">zepto</a>) para fazermos trabalhos parecidos, mas nenhuma dessas bibliotecas/frameworks tem a longevidade (9 anos!) e o ecossistema de extensões que a jQuery tem.</p>
<p>além disso, a jQuery te dá helpers pra fazer praticamente tudo que se precisa no dia a dia sem precisar de uma quantidade gigantesca de código. dessa forma, você não precisa de tanto trabalho braçal, nem de esquentar a cabeça com o tamanho dos seus próprios arquivos js.</p>
<p>então, antes de falar que a jQuery é pesada, pense na fonte marota que você mandou carregar no seu site mobile. naquela imagem bonita de capa. pense no quanto você pode economizar de outras formas e no quanto você pode facilitar a vida de outros, caso você decida abrir seu projeto. faz bem.</p>
<p>“mas Luciano, na verdade eu não gosto da jQuery porque é horrível de manter. o código fica todo macarrônico, a gente nunca sabe o que tá fazendo o que, e por isso que eu uso o framework X, pra poder organizar o código”, você tá pensando. e é agora que eu digo: a vilã não é a jQuery — é você. vou explicar melhor nessa próxima parte.</p>
<h3>os problemas da jQuery e como resolvê-los</h3>
<p>todos nós provavelmente já passamos por algum projeto em que o js no front tava bizarro e botamos a culpa na jQuery. as críticas a ela nesse âmbito geralmente estão em três pontos:</p>
<ul>
<li>o código está ilegível, macarrônico, desorganizado;</li>
<li>o código está difícil de testar (aliás, palmas se você se preocupa com isso, parabéns mesmo);</li>
<li>o código tem problemas de performance.</li>
</ul>
<p>vou te dizer uma coisa que você não quer ouvir: esses três pontos tem uma, e apenas uma variável em comum, e ela não é a jQuery; é você.</p>
<p>pros dois primeiros problemas, digo o seguinte: a API da jQuery não permite declarar intenção. ela não diz pra que serve no projeto, ela diz somente o que cada função faz. quem tem que deixar claro o papel do código no projeto é você, não ela. e a solução pra esse problema é bem simples: envolva o código da jQuery em funções suas, em arquivos diferentes e categorizados.</p>
<p>ou, se quiser, melhor ainda: envolva todo e qualquer código que tenha ligações hardcoded com o DOM e pronto: você tem um código desacoplado. quer usar outra biblioteca no lugar da jQuery? só mudar as amarras com o DOM. quer testar? só mockar as chamadas à jQuery e pronto: seu código está testável.</p>
<p>já fiz <a href="http://lucianoratamero.github.io/talks">algumas palestras</a> sobre o conceito de <a href="http://radar.oreilly.com/2014/01/keeping-jquery-in-check.html">Segregated DOM</a> e já tô me achando chato por sempre falar que é uma ótima ideia desacoplar o DOM do seu código (meu nome até aparece no google quando se pesquisa o termo! #orgulhodamamãe). mas é que é tão, tão fácil fazer código testável e organizado no front que me irrita o fato de que ninguém se esforça a fazer.</p>
<p>faltou falar sobre problemas de performance, e novamente devo dizer que, se você estudar como os browsers funcionam, você consegue fazer um código rápido com quase qualquer ferramenta que você quiser usar. aliás, recomendo <a href="https://www.youtube.com/watch?v=SmE4OwHztCc">essa palestra aqui</a> sobre esse tema, <a href="http://www.dicionarioinformal.com.br/cair+o+cu+da+bunda/">é de cair o cu da bunda</a>.</p>
<p>e se, mesmo assim, você estiver tendo problemas, reveja o conceito da página, porque provavelmente ela está fazendo coisa demais. problemas conceituais, sejam de levantamento de requisito ou de design de fluxo da aplicação, sempre refletem no código, e você deveria estar sempre com a guarda levantada sobre esse aspecto do desenvolvimento.</p>
<hr>

<p>enfim, espero que tenha apresentado meus pontos de vista direito. mas ó, jQuery também não é bala de prata. use a ferramenta certa pro problema certo. eu mesmo me pego usando angular pra alguns projetos, e eu odeio angular, mas isso é papo pra outros posts. só queria deixar claro uma coisa: usar jQuery nunca é uma ideia ruim. pode até não ser uma ideia maravilhosa, mas ruim não é.</p>
<p>então antes de perder quinze horas fazendo aquela feature sem jQuery, pense duas vezes. recomendo usá-la, a não ser que você queira provar pra si mesmo que consegue fazer sem ela (o que é ótimo, até recomendável); mas num projeto de verdade, não tenha medo de usar. vai na fé irmão.</p>
<p>fiquem à vontade pra discordar, estarei aqui pra conversar sobre o assunto, ou no bar mais próximo, só chamar e pagar uma cerveja. até então, fico por aqui. abraços, e até mais! o/</p>

  </div>

  <div class="comments">
<div id="disqus_thread"></div>
<script>
  var disqus_config = function() { this.page.identifier = "/a-jquery-nao-e-a-vila-voce-e-uma-discussao-sobre-o-uso-da-jquery-em-grandes-projetos-old"; this.page.url = "https://lucianoratamero.github.io/blog/a-jquery-nao-e-a-vila-voce-e-uma-discussao-sobre-o-uso-da-jquery-em-grandes-projetos-old/"; };
  (function() {
    var d = document, s = d.createElement('script');
    s.src = '//lucianoratamerosblog.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>
  Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript"
    rel="nofollow">comments powered by Disqus.</a>
</noscript>
</div>

        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript" src="/static/js/highlight/highlight.pack.js"></script>
  <script type="text/javascript" src="/static/js/app.min.js"></script>
</body>
</html>
