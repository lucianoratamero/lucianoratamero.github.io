<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,{},{}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.ba4c128a.js"}catch(e){main="/client/legacy/client.b5ae4b81.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> <link href=client/client-2e2ca2b4.css rel=stylesheet> <title> Lektor: gerador de sites estáticos escrito em Python - luciano@ratamero.com </title><style>.hljs{display:block;overflow-x:auto;padding:.5em;background:#1e1e1e;color:#dcdcdc}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-symbol{color:#569cd6}.hljs-link{color:#569cd6;text-decoration:underline}.hljs-built_in,.hljs-type{color:#4ec9b0}.hljs-class,.hljs-number{color:#b8d7a3}.hljs-meta-string,.hljs-string{color:#d69d85}.hljs-regexp,.hljs-template-tag{color:#9a5334}.hljs-formula,.hljs-function,.hljs-params,.hljs-subst,.hljs-title{color:#dcdcdc}.hljs-comment,.hljs-quote{color:#57a64a;font-style:italic}.hljs-doctag{color:#608b4e}.hljs-meta,.hljs-meta-keyword,.hljs-tag{color:#9b9b9b}.hljs-template-variable,.hljs-variable{color:#bd63c5}.hljs-attr,.hljs-attribute,.hljs-builtin-name{color:#9cdcfe}.hljs-section{color:gold}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-bullet,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag{color:#d7ba7d}.hljs-addition{background-color:#144212;display:inline-block;width:100%}.hljs-deletion{background-color:#600;display:inline-block;width:100%}</style><link href=https://fonts.gstatic.com rel=preconnect data-svelte=svelte-1vo6mso><link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,500;0,700;1,400&display=swap" rel=stylesheet data-svelte=svelte-1vo6mso><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&display=swap" rel=stylesheet data-svelte=svelte-1vo6mso><meta content="vamos começar com um post um pouco meta: sobre como eu fiz esse blog usando
  Python e Lektor, um gerador de sites estáticos escrito em Python. :]" name=description data-svelte=svelte-1gvklg7><meta content="Luciano Ratamero, lektor, site estático, gerador, Luciano Ratamero, Python, Python Rio" name=keywords data-svelte=svelte-1gvklg7> <link href=/client/client.ba4c128a.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-2e2ca2b4.css rel=preload as=style><link href=/client/index.b28d612a.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js.gz rel=modulepreload as=script crossorigin=use-credentials></head> <body> <div id=sapper> <section class="dark-theme theme"><section class=transition-wrapper><main><article class=blog-post> <h1><mark>Lektor: gerador de sites estáticos escrito em Python</mark></h1> <p class=meta>2016-02-02</p> <figure><a href=https://getlektor.com/ target=_blank><img alt="Lektor's logo" src=https://lucianoratamero.github.io/img/cover-lektor.png></a></figure> <p>vamos começar com um post um pouco meta: sobre como eu fiz esse blog usando Python e <a href=https://getlektor.com/ >Lektor</a>, um gerador de sites estáticos escrito em Python. por que usar uma ferramenta em Python em vez de JavaScript? pra poder falar sobre ele pro pessoal da <a href=https://www.facebook.com/pythonrio/ >PythOnRio</a>, claro. e porque foi a melhor ferramenta que usei pra esse propósito até hoje. mas isso é só um detalhe. enfim, vamos começar do começo: o que raios é Lektor? </p> <hr> <h3>o que raios é Lektor?</h3> <p>bem, como eu disse, o Lektor é um gerador de sites estáticos escrito em Python, ou seja, um gerador de htmls. basicamente, ele pega <strong>conteúdo</strong>, o formata em <strong>modelos</strong> e os aplica a <strong>templates</strong> pré-definidos. tudo isso pra poder te dar a liberdade de construir o conteúdo da forma que quiser, bem categorizado e organizado, e transformá-lo em um site estático sem se preocupar com copiar e colar html, css e javascript. </p> <p>ele é perfeito pra quem quer algo entre a construção manual de páginas em html puro, mas não precisa de uma estrutura rebuscada nem de uma aplicação e servidor necessários a um <a href=https://pt.wikipedia.org/wiki/Sistema_de_gerenciamento_de_conte%C3%BAdo>CMS</a>. dessa forma, podemos ter um site com uma estrutura complexa em html puro, deixando o computador ter o trabalho de montar o site pra gente. <strong>detalhe: esse blog é feito com Lektor ;)</strong></p> <h3>ok, como eu começo a ver qual é?</h3> <p>como todo bom pacote Python, basta instalar via pip:</p> <pre><code>pip install lektor</code></pre> <p>sempre bom lembrar que o recomendável é instalar dentro de uma <a href=http://docs.python-guide.org/en/latest/dev/virtualenvs/ >virtualenv</a>. </p> <p>com o Lektor no seu path, é só dar um:</p> <pre><code>lektor quickstart</code></pre> <p>ele vai fazer uma série de perguntas, como <em>nome do projeto</em>, <em>autor</em>, <em>pasta destino do projeto</em>, essas coisas. com isso, temos um projeto pronto pra funcionar. só precisamos saber como funciona, certo? </p> <h3>como funciona?</h3> <p>como eu disse anteriormente, ele transforma uma estrutura própria dele em html puro. vou destrinchar então cada parte dele pra a gente entender melhor. </p> <h4>estrutura de diretórios</h4> <p>o <code>quickstart</code> do Lektor gerou algo similar à seguinte estrutura de diretórios: </p> <figure><img alt="Árvore de diretórios de um projeto Lektor" src=https://lucianoratamero.github.io/img/lektor-tree.jpg></figure> <p>temos três pastas centrais aqui: <strong>content</strong>, <strong>models</strong> e <strong>templates</strong>. vou explicar cada uma com calma. </p> <h4>./content</h4> <figure><a href=https://lucianoratamero.github.io/img/content.jpg target=_blank><img alt="Exemplo de um arquivo de conteúdo" src=https://lucianoratamero.github.io/img/content.jpg></a></figure> <p>aqui está o conteúdo do seu site. é um ponto interessante do Lektor: ele não usa um banco de dados pra guardar os dados do seu site, <strong>é tudo em estrutura de pastas e arquivos</strong>. assim, você automaticamente tem uma visão geral de todo seu conteúdo e tudo eternamente organizado - fora o fato de que, bem, você não precisa de um banco de dados! quer criar uma página nova? é só criar uma pasta com o nome da página e um arquivo chamado <code>content.lr</code> dentro, com o conteúdo em si. </p> <h4>./models</h4> <figure><a href=https://lucianoratamero.github.io/img/models.jpg target=_blank><img alt="Exemplo de um arquivo de modelo" src=https://lucianoratamero.github.io/img/models.jpg></a></figure> <p>se vocês notaram na parte do <strong>content</strong>, ele tem subdivisões: <em>title</em> e <em>body</em>. essas são características do <strong>modelo de página</strong>. isso aí: <em>você pode criar tipos de conteúdo diferentes</em>, e eles podem interagir entre si. por exemplo, o modelo de <em>blog-post</em> pertence ao modelo de <em>blog</em>. isso permite um maior nível de customização na hora de formatar seu conteúdo nos <strong>templates</strong>. </p> <h4>./templates</h4> <figure><a href=https://lucianoratamero.github.io/img/templates.jpg target=_blank><img alt="Exemplo de um arquivo de template" src=https://lucianoratamero.github.io/img/templates.jpg></a></figure> <p>se você já trabalhou com Django ou Jinja, ou até Angular, vai estar em casa aqui. <strong>templates</strong> são representações html dos <strong>modelos</strong> preenchidos com <strong>conteúdos</strong>. podemos ver que nosso template de página extende o template de layout (que é o que contém todo o html repetido em todas as páginas) e substitui locais específicos com dados específicos, definidos no conteúdo criado. </p> <h3>ok, ok, mas eu não faço idéia de como tá ficando!</h3> <p>caaalma. abre o terminal de novo, faz favor. digita aí.</p> <pre><code>lektor server</code></pre> <p>então, agora você pode visitar seu site e ver o que tá fazendo acessando <code>localhost:5000</code>. mas aí vem a confusão: <em>o Lektor não gera html puro? que negócio é esse de servidor?</em> então, o que ele tá fazendo é somente detectando mudanças nos arquivos, gerando os htmls de novo e servindo esse html localmente. não tem servidor nenhum (tem, mas só é usado pra isso), é só uma conveniência pra que você consiga trabalhar melhor. </p> <p>caso você queira ver exatamente o que ele está gerando, use o comando <code>lektor build</code>. ele te dará a pasta na qual ele tá colocando os arquivos gerados. é só abrir os htmls no navegador que você verá que tá tudo perfeito, bizarramente mágico. se quiser mudar a pasta de destino dos arquivos gerados, adicione a flag <code>--output-path [caminho da pasta]</code> que ele vai <strong>sobrescrever</strong> o conteúdo da pasta com o código gerado. então <strong>tenha cuidado</strong> pra não sobrescrever uma pasta que seja valiosa pra você. sugiro criar uma pasta no próprio projeto pra que seja sempre o destino. </p> <p><strong>sério, lê de novo o último parágrafo. atentamente. vai por mim.</strong></p> <h3>beleza, achei legal, mas queria entender um pouco melhor!</h3> <p>então, o código desse blog aqui tá num repositório aberto no github: <a href=https://github.com/lucianoratamero/blog>lucianoratamero/blog</a>. claro que esse blog tem algumas sacanageiras a mais, mas dá pra entender tudo se você pegar esse post e comparar ao código. :) </p> <p>também tem os <a href=http://lucianoratamero.github.io/talks/2016/fazendo%20seu%20site%20-%20blog%20no%20Github%20Pages%20com%20Python%20e%20Lektor/ >slides da minha palestra na PythOnRio</a>. e <a href=http://facebook.com/lucianoratamero>eu</a>, caso queira tirar uma dúvida. pode perguntar sem medo! pode mandar ver nos comentários também, que eu recebo notificação (recebo mesmo!). </p> <p>ficaram algumas features interessantes faltando, como a interface administrativa, a gerência de anexos, as ferramentas de deploy, os plugins e o uso com o <a href=http://pages.github.io>github pages</a>, mas acho que pode ficar pra outro post. esse já tá meio grande demais. então até mais, vejo vocês outro dia o/ </article></main></section> <nav class=svelte-12rvnlo><ul class=svelte-12rvnlo><li class=svelte-12rvnlo><a href=/ class=svelte-12rvnlo rel=prefetch>about</a></li> <li class=svelte-12rvnlo><a href=blog class=svelte-12rvnlo rel=prefetch aria-current=page>blog</a></li> <li class=svelte-12rvnlo><a href=previous-talks class=svelte-12rvnlo rel=prefetch>talks</a></ul> </nav></section></div> 