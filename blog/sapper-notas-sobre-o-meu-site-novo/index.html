<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,{},{}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.311a5b93.js"}catch(e){main="/client/legacy/client.eda691f8.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> <link href=client/client-a688d852.css rel=stylesheet><link href=client/Icon-dfea4060.css rel=stylesheet><link href=client/index-f354569d.css rel=stylesheet> <style>.hljs-comment,.hljs-quote{color:#969896}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d54e53}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e78c45}.hljs-attribute{color:#e7c547}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#b9ca4a}.hljs-section,.hljs-title{color:#7aa6da}.hljs-keyword,.hljs-selector-tag{color:#c397d8}.hljs{display:block;overflow-x:auto;background:#000;color:#eaeaea;padding:.5em}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><title>sapper: notas sobre o meu site novo - luciano@ratamero.com</title> <meta content="ter feito o site novo com sapper me abriu os olhos pro novo mundo do svelte e de como fazer páginas acessíveis e leves. chega mais pra ver minhas notas sobre a migração do conteúdo :]" name=description> <meta content="Luciano Ratamero, svelte, sapper, javascript, frontend, SSG, SEO" name=keywords> <meta content="sapper: notas sobre o meu site novo - luciano@ratamero.com" property=og:title> <meta content="ter feito o site novo com sapper me abriu os olhos pro novo mundo do svelte e de como fazer páginas acessíveis e leves. chega mais pra ver minhas notas sobre a migração do conteúdo :]" property=og:description> <meta content=https://www.ratamero.com/default-media-share.jpg property=og:image> <meta content=https://www.ratamero.com property=og:url> <meta content="sapper: notas sobre o meu site novo - luciano@ratamero.com" name=twitter:title> <meta content="ter feito o site novo com sapper me abriu os olhos pro novo mundo do svelte e de como fazer páginas acessíveis e leves. chega mais pra ver minhas notas sobre a migração do conteúdo :]" name=twitter:description> <meta content=https://www.ratamero.com/default-media-share.jpg name=twitter:image> <meta content=summary_large_image name=twitter:card> <link href=https://fonts.gstatic.com rel=preconnect> <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel=stylesheet> <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&display=swap" rel=stylesheet> <link href=/client/client.311a5b93.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-a688d852.css rel=preload as=style><link href=/client/index.af107b79.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/Icon.06acf308.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/MetaTags.39c5eacd.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/index.6ebdbd27.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js.gz rel=modulepreload as=script crossorigin=use-credentials><link href=/client/Icon-dfea4060.css rel=preload as=style><link href=/client/index-f354569d.css rel=preload as=style></head> <body> <div id=sapper> <section class="light-theme theme"><section class="loading-overlay svelte-1rtsid8"><div class="circle svelte-gkf9c4" style=--size:60px;--colorInner:#676778;--colorCenter:#40B3FF;--colorOuter:#FF3E00></div></section> <section class=transition-wrapper><main><article class=blog-post> <h1><mark>sapper: notas sobre o meu site novo</mark></h1> <p class=meta>2021-01-11 </p> <article><p>faz pouco mais de seis meses que eu comecei a estudar e me envolver com <a href=https://svelte.dev rel=noopener target=_blank>svelte</a>. desde então, me encanta o quão pouco esforço e tempo é necessário pra fazer basicamente o que quiser no front. mas o projeto que me ganhou mesmo foi o <a href=https://sapper.svelte.dev rel=noopener target=_blank>sapper</a>. ele traz todos (<strong>TODOS</strong>) os benefícios de frameworks como o nextjs e o gatsby, mas com muito menos complicação. </p> <p>como de lei, tomei a descoberta do sapper como oportunidade de rescrever meu site e tirar da gaveta o plano de ter algum lugar online pra prototipar novos estudos de front. aqui ficam minhas anotações de soluções e problemas de ter usado o sapper pra um site novo! </p> <hr> <h2 id=ascoisasboas>as coisas boas</h2> <h3 id=heranadosvelte>herança do svelte</h3> <p>primeiro de tudo, o sapper é um framework para aplicações svelte, e só isso já é motivo mais do que o suficiente pra adotar. não só isso, mas é um produto do mesmo time, com os mesmos valores. o sapper é rápido, gera pouquíssimo código e, por padrão, só envia pro front o código estritamente necessário, além de prover uma estrutura intuitiva para roteamento, baseado na árvore de diretórios. </p> <p>isso significa que ele atende uma das minhas maiores necessidades, que era usar um framework que gerasse páginas estáticas (<a href=https://www.netlify.com/blog/2020/04/14/what-is-a-static-site-generator-and-3-ways-to-find-the-best-one/ >SSG</a>), mas que não tivesse um backend (ou seja, usasse SSG em vez de <a href=https://medium.com/@baphemot/whats-server-side-rendering-and-do-i-need-it-cb42dc059b38>SSR</a>). isso é ótimo para <span class=tip>SEO</span>, ou seja, a base de um bom blog. </p> <p>essas limitações vieram por conta desse site estar hospedado no github pages, mas acho essas necessidades interessantes pra estressar um pouco os limites de uma ferramenta. coube como uma luva. :] </p> <h3 id=velocidadededesenvolvimento>velocidade de desenvolvimento</h3> <p>trabalhar com svelte é lindo demais. com pouco tempo e código, é fácil prototipar o que quiser no front, e raramente é necessário fazer grandes refatorações. o sapper, por consequência, é beeeem fácil de usar. </p> <p>demorei umas 8 vezes mais pra fazer o CSS (com os temas light e dark) e pra migrar os posts do meu antigo site pra cá do que efetivamente implementando o site. nunca tive uma barreira que me fez ficar pensando "nossa, fazer essa funcionalidade aqui é impossível". pelo contrário, todos os desafios que tive foram pouco complicados, e ter um compilador do lado me dizendo o que eu fiz de errado é maravilhoso. </p> <h3 id=acessibilidade>acessibilidade</h3> <p>quando falo de ter uma aplicação acessível, não tô falando só sobre UI, sobre ela ser facilmente legível para leitores de tela ou ser fácil de usar. acessibilidade também passa por sua app ser leve o suficiente para dispositivos lentos ou antigos, assim como possível de ser acessada offline (caso você já tenha visitado a página) e disponível para pessoas com javascript desabilitado. </p> <p>o fato do sapper vir com configurações para <a href=https://web.dev/what-are-pwas/ rel=noopener target=_blank>PWA</a> prontas, com o mínimo de esforço para customização, e de a entrega ser em páginas HTML estáticas fez com que eu não tivesse que pensar ou implementar nada na mão (fora a paginação, que vou falar sobre mais tarde). </p> <h3 id=baseadoemjs>baseado em js</h3> <p>apesar do svelte ser uma linguagem feita em cima do HTML, ele se integra facilmente com a plataforma javascript - e, por consequência, o sapper também. isso torna possível integrações com inúmeras ferramentas, que ficam disponíveis de forma fácil através do npm. </p> <p>quer estudar D3? quer testar ORMs pra indexedDB? ou implementar aquele web component doideira? instala as dependências via npm, importa no componente e usa. só isso. </p> <h2 id=ascoisasnotoboas>as coisas não tão boas</h2> <h3 id=ferramentasnotomaduras>ferramentas não tão maduras</h3> <p>o sapper e o svelte (na versão 3, a atual) são mais novos em comparação com outras ferramentas parecidas. com isso, algumas coisas, como internacionalização e minificação de imagens, ainda não estão integradas no próprio framework. </p> <p>no entanto, ferramentas pra esses propósitos já existem no ecossistema do svelte. seria mais uma questão de investir tempo pra integrar. internacionalização, por exemplo, tem uma prioridade razoavelmente baixa pra mim; mas a minificação de imagens já tá sendo feita, mesmo que através de <a href=https://github.com/lucianoratamero/lucianoratamero.github.io/blob/src/compressImages.js>um script meio bosta e sem testes</a>. </p> <h3 id=osappernovemcomcomponentesprapaginao>o sapper não vem com componentes pra paginação </h3> <p>enquanto seria fácil de fazer paginação via js, minha limitação (autoimposta, diga-se de passagem) de permitir acesso com js desabilitado me fez gastar um bocado de tempo entendendo como o sapper funciona um pouco mais a fundo, pra que as páginas se incrementassem automaticamente depois de eu adicionar um post. </p> <p>muito por conta disso que eu acabei fazendo <a href="https://www.youtube.com/watch?v=9i0aDJ56TNU" rel=noopener target=_blank>um vídeo no youtube de como implementar essa paginação no sapper</a> (que aliás já tá meio defasado). no fim das contas, foram umas 5 horas investidas nisso, o que acho um tempo bem razoável pra uma funcionalidade desse tamanho. </p> <h3 id=osappertcomosdiascontados>o sapper tá com os dias contados</h3> <p>pro bem e pro mal, o sapper entrou em modo de manutenção faz uns dois meses. sim, é um projeto novo que vai parar de receber funcionalidades novas. </p> <p>o motivo disso é que a galera do time do svelte vai tornar o próprio svelte capaz de fazer as coisas que o sapper hoje faz, o que é uma ótima notícia. também prometeram um caminho de migração razoavelmente facilitado pra quem tem aplicações sapper, então não vi muito motivo pra adiar meu site novo. </p> <p>quando o svelte kit chegar, faço outro post com as minhas impressões :]</p> <hr> <p>enfim, essas foram minhas notas sobre refazer tudo com svelte/sapper. o código fonte tá <a href=https://github.com/lucianoratamero/lucianoratamero.github.io/tree/src rel=noopener target=_blank>lá no github</a>, razoavelmente documentado. tem alguma dúvida ou curiosidade? fala comigo no <a href=https://twitter.com/lucianoratamero rel=noopener target=_blank>twitter</a>. quer saber mais sobre svelte? entra no <a href=https://t.me/sveltebrasil rel=noopener target=_blank>grupo da svelte brasil no telegram</a>. valeu, e até a próxima o/ </article></article></main></section> <nav class=svelte-1kh6syz><ul class=svelte-1kh6syz><li class=svelte-1kh6syz><a href=/ rel=prefetch class=svelte-1kh6syz>about</a></li> <li class=svelte-1kh6syz><a href=blog/page/1 rel=prefetch class=svelte-1kh6syz aria-current=page>blog</a></li> <li class=svelte-1kh6syz><a href=previous-talks rel=prefetch class=svelte-1kh6syz>talks</a></ul> </nav> </section></div> <script> document.addEventListener('readystatechange', function () {
			if (document.readyState === 'interactive') {
				// set theme
				document.getElementsByClassName('theme')[0].classList = window.matchMedia &&
					window.matchMedia("(prefers-color-scheme: dark)").matches
					? "theme dark-theme"
					: "theme light-theme";

				// fix height on chrome mobile
				let vh = window.innerHeight * 0.01;
				// Then we set the value in the --vh custom property to the root of the document
				document.documentElement.style.setProperty("--vh", `${vh}px`);

				const isChrome = navigator.userAgent.indexOf("Chrome") > -1;
				if (isChrome) {
					document.getElementsByClassName("theme")[0].style["min-height"] =
						"calc(var(--vh, 1vh) * 100)";
				}

				// We listen to the resize event
				window.addEventListener("resize", () => {
					// We execute the same script as before
					let vh = window.innerHeight * 0.01;
					document.documentElement.style.setProperty("--vh", `${vh}px`);

					if (isChrome) {
						document.getElementsByClassName("theme")[0].style["min-height"] =
							"calc(var(--vh, 1vh) * 100)";
					}
				});
			}
		}); </script> 